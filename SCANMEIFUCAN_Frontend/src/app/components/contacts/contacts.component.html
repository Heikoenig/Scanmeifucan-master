<div class="root-container">
  <div class="contact-content p-4 container">
    <div style="display: flex; gap: 10px;">
      <mat-form-field class="w-50">
        <mat-label>{{'contacts-component.search-bar-text' | translate}}</mat-label>
        <input type="text" matInput [(ngModel)]="searchText">
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
      <button class="mt-2 blue-btn" mat-raised-button color="primary">{{'contacts-component.filter' |
        translate}}</button>
    </div>

    <div class="row h-100">
      <div class="col-xl-4 p-2 list-col">
        <div class="card w-100 p-2 h-90 animate_animated animateslideInUp animate_faster">
          <div class="card-body">
            <h2 class="card-header-text">{{ 'contacts-component.recently-added' | translate }}</h2>
            <div *ngIf="isLoading" class="text-center">
              <h1 class="animate_animated animatefaster animate_slideInUpBig">{{
                'home-component.loading' | translate }}</h1>
            </div>
            <div *ngIf="!isLoading && upcomingContacts.length == 0" class="text-center mt-5">
              <lib-lottie-anim [width]="'250px'" [segments]="[0, 146]" [path]="'assets/animations/schedule-anim.json'"
                [autoplay]="true"></lib-lottie-anim>
              <h1 class="animate_animated animatefaster animate_slideInUpBig">{{
                'home-component.empty' | translate }}</h1>
              <p class="animate_animated animatefaster animateslideInUpBig animate_delay-100ms">
                {{ 'home-component.empty-info' | translate }}</p>
            </div>
            <ul class="travel-list mt-3" style="height: 100%; overflow: auto;">
              <li class="travel-list-item"
                [ngClass]="{'active': selectedContact != undefined && selectedContact.id == contact.id}" matRipple
                *ngFor="let contact of upcomingContacts" (click)="selectListItem(contact)">
                <div class="travel-list-item-panel">
                  <mat-checkbox [(ngModel)]="contact.done" class="list-item-checkbox"></mat-checkbox>
                  <div class="list-item-avatar">
                    AB
                  </div>
                  <div class="list-item-info-panel">
                    <p>{{ contact.name }}</p>
                    <span class="continent">{{ contact.title }}</span>
                  </div>
                  <div class="delete-icon ml-auto">
                    <i class="bi bi-trash-fill" (click)="deleteContact(contact.id)"></i>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Contact inspector -->
      <div class="col-xl-8 p-2 inspector-col">
        <div class="card w-100 h-100 p-2 animate_animated animateslideInUp animatefaster animate_delay-100ms">
          <div class="card-body">

            <div *ngIf="isAddMode; else edit">
              <h2>{{'contacts-component.add-contact' | translate}}</h2>
              <div class="col-md-12" *ngIf="!sysImage">
                <webcam [height]="400" [trigger]="invokeObservable" (imageCapture)="captureImg($event)">
                </webcam>
              </div>
              <div class="col-12" *ngIf="sysImage">
                <!-- <div id="results">Your taken image manifests here...</div> -->
                <img [src]="webcamImage?.imageAsDataUrl" height="400px" />
              </div>
              <div class="col-md-12">
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                  <button class="btn blue-btn" mat-raised-button color="primary" (click)="getSnapshot()">
                    {{ !sysImage? 'Scan' : 'Again Scan' }}
                  </button>
                  <button class="btn blue-btn" mat-raised-button color="primary" (click)="saveImage()"
                    [disabled]="!sysImage">
                    Next
                  </button>
                </div>
              </div>

            </div>

            <ng-template #edit>
              <div *ngIf="!!selectedContact; else elseBlock">
                <div class="contact-panel">
                  <div class="contact-panel-avatar">
                    AB
                  </div>
                  <div class="contact-panel-info">
                    <span class="name">Name</span>
                    <span class="description">{{ selectedContact.name }}</span>
                  </div>
                  <!-- for Avatar name -->
                </div>
                <mat-chip-set class="mt-2">
                  <mat-chip class="travel-list-tag-box travel-list-country-box">
                    <span class="continent-chip">{{ selectedContact.title }}</span>
                  </mat-chip>
                </mat-chip-set>

                <div class="contact-panel-details">
                  <b class="row-label">Speech</b>
                  <span>Mister</span>
                  <div class="edit-icon">
                    <i class="bi bi-pencil-fill"></i>
                  </div>

                </div>
                <div class="contact-panel-details">
                  <b class="row-label">Name</b>
                  <span>Herr</span>
                  <div class="edit-icon">
                    <i class="bi bi-pencil-fill"></i>
                  </div>
                </div>
                <div class="contact-panel-details">
                  <b class="row-label">Last name</b>
                  <span>{{ selectedContact.name }}</span>
                  <div class="edit-icon">
                    <i class="bi bi-pencil-fill"></i>
                  </div>

                </div>
                <div class="contact-panel-details">
                  <b class="row-label">Profession</b>
                  <span>{{ selectedContact.business }}</span>
                  <div class="edit-icon">
                    <i class="bi bi-pencil-fill"></i>
                  </div>

                </div>
                <div class="contact-panel-details">
                  <b class="row-label">Mobile Number</b>
                  <span>{{ selectedContact.phone_numbers.join(',')}}</span>
                  <div class="edit-icon">
                    <i class="bi bi-pencil-fill"></i>
                  </div>

                </div>
                <div class="contact-panel-details">
                  <b class="row-label">Tel</b>
                  <span>{{ selectedContact.phone_numbers.join(',')}}</span>
                  <div class="edit-icon">
                    <i class="bi bi-pencil-fill"></i>
                  </div>

                </div>
                <div class="contact-panel-details">
                  <b class="row-label">Mail</b>
                  <span>{{selectedContact.email }}</span>
                  <div class="edit-icon">
                    <i class="bi bi-pencil-fill"></i>
                  </div>
                </div>

                <!-- <mat-form-field class="w-100 mt-3">
                  <mat-label>{{ 'contacts-component.notes-placeholder' | translate }}</mat-label>
                  <textarea rows="5" matInput [(ngModel)]="selectedContact.notes"></textarea>
                </mat-form-field>
                <button class="mb-5 blue-btn" mat-raised-button
                  color="primary">{{
                  'contacts-component.save-notes' | translate}}</button> -->
              </div>

              <ng-template #elseBlock>
                <h2>Selected contact</h2>
                <div class="center-container">
                  <p class="center-text">Select a contact to view the added information</p>
                </div>
              </ng-template>
            </ng-template>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>